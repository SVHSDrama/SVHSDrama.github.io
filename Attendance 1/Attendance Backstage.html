<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Tracker Backstage</title>
</head>
<body style="background-color:rgb(128,128,128);">

    <h2>Attendance Backstage</h2>

    <div id="attendanceList">
        <!-- Person 1 -->
        <label for="person1">Nice Citraro:</label>
        <select id="person1" onchange="saveAttendance('person1')">
            <option style="background-color:rgb(181,176,173)"; value="">--Mark Attendance--</option>
            <option value="present">Present</option>
            <option value="absent">Absent</option>
            <option value="late">Late</option>
        </select>
        <span>Present Count: <span id="presentCountPerson1">0</span></span>
        <span> | Absent Count: <span id="absentCountPerson1">0</span></span>
        <span> | Late Count: <span id="lateCountPerson1">0</span></span>
        <button style="background-color:rgb(255,123,123)"; onclick="resetCounters('person1')">Reset</button>
        <br><br>

        <!-- Person 2 -->
        <label for="person2">Insert Name:</label>
        <select id="person2" onchange="saveAttendance('person2')">
            <option value="">--Mark Attendance--</option>
            <option value="present">Present</option>
            <option value="absent">Absent</option>
            <option value="late">Late</option>
        </select>
        <span>Present Count: <span id="presentCountPerson2">0</span></span>
        <span> | Absent Count: <span id="absentCountPerson2">0</span></span>
        <span> | Late Count: <span id="lateCountPerson2">0</span></span>
        <button style="background-color:rgb(255,123,123)"; onclick="resetCounters('person2')">Reset</button>
        <br><br>

        <!-- Person 3 -->
        <label for="person3">Insert Name:</label>
        <select id="person3" onchange="saveAttendance('person3')">
            <option value="">--Mark Attendance--</option>
            <option value="present">Present</option>
            <option value="absent">Absent</option>
            <option value="late">Late</option>
        </select>
        <span>Present Count: <span id="presentCountPerson3">0</span></span>
        <span> | Absent Count: <span id="absentCountPerson3">0</span></span>
        <span> | Late Count: <span id="lateCountPerson3">0</span></span>
        <button style="background-color:rgb(255,123,123)"; onclick="resetCounters('person3')">Reset</button>
        <br><br>

        <!-- Person 4 -->
        <label for="person4">Insert Name:</label>
        <select id="person4" onchange="saveAttendance('person4')">
            <option value="">--Mark Attendance--</option>
            <option value="present">Present</option>
            <option value="absent">Absent</option>
            <option value="late">Late</option>
        </select>
        <span>Present Count: <span id="presentCountPerson4">0</span></span>
        <span> | Absent Count: <span id="absentCountPerson4">0</span></span>
        <span> | Late Count: <span id="lateCountPerson4">0</span></span>
        <button style="background-color:rgb(255,123,123)"; onclick="resetCounters('person4')">Reset</button>
        <br><br>
        <hr size="8"; style="background-color:rgb(27,27,27)">
        <br>
    <a href="https://svhsdrama.github.io/">
        <button class="large-button"; style="background-color:rgb(117, 79, 168); color:rgb(0,0,0); border-color:rgb(0,0,0); font-size: 15px ">
            Return to Home Page
        </button>
    </a>
    </div>

    <script>
        // Function to save attendance and count each type
        function saveAttendance(personId) {
            const attendanceValue = document.getElementById(personId).value;
            localStorage.setItem(personId, attendanceValue);

            // Handle the different attendance types
            if (attendanceValue === 'present') {
                incrementCount(personId, 'presentCount');
            } else if (attendanceValue === 'absent') {
                incrementCount(personId, 'absentCount');
            } else if (attendanceValue === 'late') {
                incrementCount(personId, 'lateCount');
            }
        }

        // Function to increment the count of attendance types
        function incrementCount(personId, countType) {
            let count = parseInt(localStorage.getItem(personId + '_' + countType)) || 0;
            count += 1;
            localStorage.setItem(personId + '_' + countType, count);
            document.getElementById(countType + capitalizeFirstLetter(personId)).innerText = count;
        }

        // Function to load saved attendance and count on page load
        window.onload = function() {
            const people = ['person1', 'person2', 'person3', 'person4']; // List of people

            people.forEach(personId => {
                const savedAttendance = localStorage.getItem(personId);

                // Load saved attendance
                if (savedAttendance) {
                    document.getElementById(personId).value = savedAttendance;
                }

                // Load saved counts
                ['presentCount', 'absentCount', 'lateCount'].forEach(countType => {
                    const savedCount = localStorage.getItem(personId + '_' + countType) || 0;
                    document.getElementById(countType + capitalizeFirstLetter(personId)).innerText = savedCount;
                });
            });
        }

        // Helper function to capitalize the first letter for ID purposes
        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        // Function to reset counters for a person
        function resetCounters(personId) {
            const counts = ['presentCount', 'absentCount', 'lateCount'];

            counts.forEach(countType => {
                // Reset the count in localStorage
                localStorage.setItem(personId + '_' + countType, 0);
                
                // Reset the displayed count
                document.getElementById(countType + capitalizeFirstLetter(personId)).innerText = 0;
            });
        }
    </script>

</body>
</html>
